
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <title>Ports · Introducción a Elm</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 5.1.4">
        <meta name="author" content="Evan Czaplicki">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="custom_elements.html" />
    
    
    <link rel="prev" href="flags.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introducción
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../core_language.html">
            
                <a href="../core_language.html">
            
                    
                    Lo esencial del lenguaje
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../architecture/">
            
                <a href="../architecture/">
            
                    
                    Arquitectura Elm
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../architecture/buttons.html">
            
                <a href="../architecture/buttons.html">
            
                    
                    Botones
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../architecture/text_fields.html">
            
                <a href="../architecture/text_fields.html">
            
                    
                    Campos de texto
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../architecture/forms.html">
            
                <a href="../architecture/forms.html">
            
                    
                    Formularios
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../types/">
            
                <a href="../types/">
            
                    
                    Tipos
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../types/reading_types.html">
            
                <a href="../types/reading_types.html">
            
                    
                    Leyendo tipos
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../types/type_aliases.html">
            
                <a href="../types/type_aliases.html">
            
                    
                    Alias de tipo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../types/custom_types.html">
            
                <a href="../types/custom_types.html">
            
                    
                    Tipos personalizados
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../types/pattern_matching.html">
            
                <a href="../types/pattern_matching.html">
            
                    
                    Búsqueda de patrones
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../error_handling/">
            
                <a href="../error_handling/">
            
                    
                    Manejo de errores
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../error_handling/maybe.html">
            
                <a href="../error_handling/maybe.html">
            
                    
                    Maybe
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../error_handling/result.html">
            
                <a href="../error_handling/result.html">
            
                    
                    Result
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../effects/">
            
                <a href="../effects/">
            
                    
                    Comandos y suscripciones
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../effects/http.html">
            
                <a href="../effects/http.html">
            
                    
                    HTTP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../effects/json.html">
            
                <a href="../effects/json.html">
            
                    
                    JSON
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../effects/random.html">
            
                <a href="../effects/random.html">
            
                    
                    Valores aleatorios
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../effects/time.html">
            
                <a href="../effects/time.html">
            
                    
                    Tiempo
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../install/">
            
                <a href="../install/">
            
                    
                    Instalación
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../install/editor.html">
            
                <a href="../install/editor.html">
            
                    
                    Editor de código
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../install/elm.html">
            
                <a href="../install/elm.html">
            
                    
                    Elm
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="./">
            
                <a href="./">
            
                    
                    JavaScript Interop
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="flags.html">
            
                <a href="flags.html">
            
                    
                    Flags
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.8.2" data-path="ports.html">
            
                <a href="ports.html">
            
                    
                    Ports
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="custom_elements.html">
            
                <a href="custom_elements.html">
            
                    
                    Custom Elements
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="limits.html">
            
                <a href="limits.html">
            
                    
                    Limits
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../webapps/">
            
                <a href="../webapps/">
            
                    
                    Web Apps
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../webapps/navigation.html">
            
                <a href="../webapps/navigation.html">
            
                    
                    Navigation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../webapps/url_parsing.html">
            
                <a href="../webapps/url_parsing.html">
            
                    
                    URL Parsing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../webapps/modules.html">
            
                <a href="../webapps/modules.html">
            
                    
                    Modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../webapps/structure.html">
            
                <a href="../webapps/structure.html">
            
                    
                    Structure
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../optimization/">
            
                <a href="../optimization/">
            
                    
                    Optimization
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../optimization/lazy.html">
            
                <a href="../optimization/lazy.html">
            
                    
                    Html.lazy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../optimization/keyed.html">
            
                <a href="../optimization/keyed.html">
            
                    
                    Html.keyed
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../optimization/asset_size.html">
            
                <a href="../optimization/asset_size.html">
            
                    
                    Minification
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../next_steps.html">
            
                <a href="../next_steps.html">
            
                    
                    Next Steps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" >
            
                <span>
            
                    
                    Appendix
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../appendix/types_as_sets.html">
            
                <a href="../appendix/types_as_sets.html">
            
                    
                    Types as Sets
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../appendix/types_as_bits.html">
            
                <a href="../appendix/types_as_bits.html">
            
                    
                    Types as Bits
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../appendix/function_types.html">
            
                <a href="../appendix/function_types.html">
            
                    
                    Function Types
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Published with HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Ports</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="ports">Ports</h1>
<p>Ports allow communication between Elm and JavaScript.</p>
<p>Ports are probably most commonly used for <a href="https://github.com/elm-community/js-integration-examples/tree/master/websockets" target="_blank"><code>WebSockets</code></a> and <a href="https://github.com/elm-community/js-integration-examples/tree/master/localStorage" target="_blank"><code>localStorage</code></a>. Let's focus on the <code>WebSockets</code> example.</p>
<h2 id="ports-in-javascript">Ports in JavaScript</h2>
<p>Here we have pretty much the same HTML we have been using on the previous pages, but with a bit of extra JavaScript code in there. We create a connection to <code>wss://echo.websocket.org</code> that just repeats back whatever you send it. You can see in the <a href="https://ellie-app.com/8yYgw7y7sM2a1" target="_blank">live example</a> that this lets us make the skeleton of a chat room:</p>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!doctype <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Elm + Websockets<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"elm.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"myapp"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="language-javascript">
    <span class="hljs-comment">// Start the Elm application.</span>
    <span class="hljs-keyword">var</span> app = <span class="hljs-title class_">Elm</span>.<span class="hljs-property">Main</span>.<span class="hljs-title function_">init</span>({
      <span class="hljs-attr">node</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"myapp"</span>),
    });

    <span class="hljs-comment">// Create your WebSocket.</span>
    <span class="hljs-keyword">var</span> socket = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>(<span class="hljs-string">"wss://echo.websocket.org"</span>);

    <span class="hljs-comment">// When a command goes to the `sendMessage` port, we pass the message</span>
    <span class="hljs-comment">// along to the WebSocket.</span>
    app.<span class="hljs-property">ports</span>.<span class="hljs-property">sendMessage</span>.<span class="hljs-title function_">subscribe</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">message</span>) {
      socket.<span class="hljs-title function_">send</span>(message);
    });

    <span class="hljs-comment">// When a message comes into our WebSocket, we pass the message along</span>
    <span class="hljs-comment">// to the `messageReceiver` port.</span>
    socket.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"message"</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) {
      app.<span class="hljs-property">ports</span>.<span class="hljs-property">messageReceiver</span>.<span class="hljs-title function_">send</span>(event.<span class="hljs-property">data</span>);
    });

    <span class="hljs-comment">// If you want to use a JavaScript library to manage your WebSocket</span>
    <span class="hljs-comment">// connection, replace the code in JS with the alternate implementation.</span>
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>We call <code>Elm.Main.init()</code> like in all of our interop examples, but this time we are actually using the resulting <code>app</code> object. We are subscribing to the <code>sendMessage</code> port and we are sending to the <code>messageReceiver</code> port.</p>
<p>Those correspond to code written on the Elm side.</p>
<h2 id="ports-in-elm">Ports in Elm</h2>
<p>Check out the lines that use the <code>port</code> keyword in the corresponding Elm file. This is how we define the ports that we just saw on the JavaScript side.</p>
<pre><code class="lang-elm"><span class="hljs-keyword">port</span> <span class="hljs-keyword">module</span> Main <span class="hljs-keyword">exposing</span> (..)

<span class="hljs-keyword">import</span> Browser
<span class="hljs-keyword">import</span> Html <span class="hljs-keyword">exposing</span> (..)
<span class="hljs-keyword">import</span> Html.Attributes <span class="hljs-keyword">exposing</span> (..)
<span class="hljs-keyword">import</span> Html.Events <span class="hljs-keyword">exposing</span> (..)
<span class="hljs-keyword">import</span> Json.Decode <span class="hljs-keyword">as</span> D



<span class="hljs-comment">-- MAIN</span>


<span class="hljs-title">main</span> : <span class="hljs-type">Program</span> () <span class="hljs-type">Model</span> <span class="hljs-type">Msg</span>
<span class="hljs-title">main</span> =
    <span class="hljs-type">Browser</span>.element
        { init = init
        , view = view
        , update = update
        , subscriptions = subscriptions
        }



<span class="hljs-comment">-- PORTS</span>


<span class="hljs-keyword">port</span> sendMessage : String -&gt; Cmd msg


<span class="hljs-keyword">port</span> messageReceiver : (<span class="hljs-type">String</span> -&gt; msg) -&gt; Sub msg



<span class="hljs-comment">-- MODEL</span>


type alias Model =
    { draft : String
    , messages : List String
    }


init : () -&gt; ( <span class="hljs-type">Model</span>, <span class="hljs-type">Cmd</span> <span class="hljs-type">Msg</span> )
init flags =
    ( { draft = "", messages = [] }
    , <span class="hljs-type">Cmd</span>.none
    )



<span class="hljs-comment">-- UPDATE</span>


type Msg
    = DraftChanged String
    | Send
    | Recv String



<span class="hljs-comment">-- Use the `sendMessage` port when someone presses ENTER or clicks</span>
<span class="hljs-comment">-- the "Send" button. Check out index.html to see the corresponding</span>
<span class="hljs-comment">-- JS where this is piped into a WebSocket.</span>


update : Msg -&gt; Model -&gt; ( <span class="hljs-type">Model</span>, <span class="hljs-type">Cmd</span> <span class="hljs-type">Msg</span> )
update msg model =
    case msg of
        DraftChanged draft -&gt;
            ( { model | draft = draft }
            , <span class="hljs-type">Cmd</span>.none
            )

        Send -&gt;
            ( { model | draft = "" }
            , sendMessage model.draft
            )

        Recv message -&gt;
            ( { model | messages = model.messages ++ [ message ] }
            , <span class="hljs-type">Cmd</span>.none
            )



<span class="hljs-comment">-- SUBSCRIPTIONS</span>
<span class="hljs-comment">--</span>
<span class="hljs-comment">-- Subscribe to the `messageReceiver` port to hear about messages coming in</span>
<span class="hljs-comment">-- from JS. Check out the index.html file to see how this is hooked up to a</span>
<span class="hljs-comment">-- WebSocket.</span>


subscriptions : Model -&gt; Sub Msg
subscriptions _ =
    messageReceiver Recv



<span class="hljs-comment">-- VIEW</span>


view : Model -&gt; Html Msg
view model =
    div []
        [ h1 [] [ text "Echo Chat" ]
        , ul []
            (<span class="hljs-type">List</span>.map (\msg -&gt; li [] [ text msg ]) model.messages)
        , input
            [ type_ "text"
            , placeholder "Draft"
            , onInput DraftChanged
            , on "keydown" (ifIsEnter <span class="hljs-type">Send</span>)
            , value model.draft
            ]
            []
        , button [ onClick Send ] [ text "Send" ]
        ]



<span class="hljs-comment">-- DETECT ENTER</span>


ifIsEnter : msg -&gt; D.Decoder msg
ifIsEnter msg =
    D.field "key" D.string
        |&gt; D.andThen
            (\key -&gt;
                if key == "<span class="hljs-type">Enter</span>" then
                    <span class="hljs-type">D</span>.succeed msg

                else
                    <span class="hljs-type">D</span>.fail "some other key"
            )
</code></pre>
<p>Notice that the first line says <code>port module</code> rather than just <code>module</code>. This makes it possible to define ports in a given module. The compiler gives a hint about this if it is needed, so hopefully no one gets too stuck on that!</p>
<p>Okay, but what is going on with the <code>port</code> declarations for <code>sendMessage</code> and <code>messageReceiver</code>?</p>
<h2 id="outgoing-messages-cmd">Outgoing Messages (<code>Cmd</code>)</h2>
<p>The <code>sendMessage</code> declaration lets us send messages out of Elm.</p>
<pre><code class="lang-elm"><span class="hljs-keyword">port</span> sendMessage : String -&gt; Cmd msg
</code></pre>
<p>Here we are declaring that we want to send out <code>String</code> values, but we could send out any of the types that work with flags. We talked about those types on the previous page, and you can check out <a href="https://ellie-app.com/8yYddD6HRYJa1" target="_blank">this <code>localStorage</code> example</a> to see a <a href="https://package.elm-lang.org/packages/elm/json/latest/Json-Encode#Value" target="_blank"><code>Json.Encode.Value</code></a> getting sent out to JavaScript.</p>
<p>From there we can use <code>sendMessage</code> like any other function. If your <code>update</code> function produces a <code>sendMessage "hello"</code> command, you will hear about it on the JavaScript side:</p>
<pre><code class="lang-javascript">app.<span class="hljs-property">ports</span>.<span class="hljs-property">sendMessage</span>.<span class="hljs-title function_">subscribe</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">message</span>) {
  socket.<span class="hljs-title function_">send</span>(message);
});
</code></pre>
<p>This JavaScript code is subscribed to all of the outgoing messages. You can <code>subscribe</code> multiple functions and <code>unsubscribe</code> functions by reference, but we generally recommend keeping things static.</p>
<p>We also recommend sending out richer messages, rather than making lots of individual ports. Maybe that means having a custom type in Elm that represents everything you might need to tell JS, and then using <a href="https://package.elm-lang.org/packages/elm/json/latest/Json-Encode" target="_blank"><code>Json.Encode</code></a> to send it out to a single JS subscription. Many people find that this creates a cleaner separation of concerns. The Elm code clearly owns some state, and the JS clearly owns other state.</p>
<h2 id="incoming-messages-sub">Incoming Messages (<code>Sub</code>)</h2>
<p>The <code>messageReceiver</code> declaration lets us listen for messages coming in to Elm.</p>
<pre><code class="lang-elm"><span class="hljs-keyword">port</span> messageReceiver : (<span class="hljs-type">String</span> -&gt; msg) -&gt; Sub msg
</code></pre>
<p>We are saying we are going to receive <code>String</code> values, but again, we can listen for any type that can come in through flags or outgoing ports. Just swap out the <code>String</code> type with one of the types that can cross the border.</p>
<p>Again we can use <code>messageReceiver</code> like any other function. In our case we call <code>messageReceiver Recv</code> when defining our <code>subscriptions</code> because we want to hear about any incoming messages from JavaScript. This will let us get messages like <code>Recv "how are you?"</code> in our <code>update</code> function.</p>
<p>On the JavaScript side, we are able to send things to this port whenever we want:</p>
<pre><code class="lang-javascript">socket.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"message"</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) {
  app.<span class="hljs-property">ports</span>.<span class="hljs-property">messageReceiver</span>.<span class="hljs-title function_">send</span>(event.<span class="hljs-property">data</span>);
});
</code></pre>
<p>We happen to be sending whenever the websocket gets a message, but you could send at other times as well. Maybe we are getting messages from another data source as well. That is fine, and Elm does not need to know anything about it! Just send the strings through the relevant port.</p>
<h2 id="notes">Notes</h2>
<p><strong>Ports are about creating strong boundaries!</strong> Definitely do not try to make a port for every JS function you need. You may really like Elm and want to do everything in Elm no matter the cost, but ports are not designed for that. Instead, focus on questions like “who owns the state?” and use one or two ports to send messages back and forth. If you are in a complex scenario, you can even simulate <code>Msg</code> values by sending JS like <code>{ tag: "active-users-changed", list: ... }</code> where you have a tag for all the variants of information you might send across.</p>
<p>Here are some simple guidelines and common pitfalls:</p>
<ul>
<li><p><strong>Sending <code>Json.Encode.Value</code> through ports is recommended.</strong> Like with flags, certain core types can pass through ports as well. This is from the time before JSON decoders, and you can read about it more <a href="flags.html#verifying-flags">here</a>.</p>
</li>
<li><p><strong>All <code>port</code> declarations must appear in a <code>port module</code>.</strong> It is probably best to organize all your ports into one <code>port module</code> so it is easier to see the interface all in one place.</p>
</li>
<li><p><strong>Ports are for applications.</strong> A <code>port module</code> is available in applications, but not in packages. This ensures that application authors have the flexibility they need, but the package ecosystem is entirely written in Elm. We think this will create a stronger ecosystem and community in the long run, and we get into the tradeoffs in depth in the upcoming section on the <a href="limits.html">limits</a> of Elm/JS interop.</p>
</li>
<li><p><strong>Ports can be dead code eliminated.</strong> Elm has quite aggressive <a href="https://en.wikipedia.org/wiki/Dead_code_elimination" target="_blank">dead code elimination</a>, and it will remove ports that are not used within Elm code. The compiler does not know what goes on in JavaScript, so try to hook things up in Elm before JavaScript.</p>
</li>
</ul>
<p>I hope this information will help you find ways to embed Elm in your existing JavaScript! It is not as glamorous as doing a full-rewrite in Elm, but history has shown that it is a much more effective strategy.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="flags.html" class="navigation navigation-prev " aria-label="Previous page: Flags">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="custom_elements.html" class="navigation navigation-next " aria-label="Next page: Custom Elements">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Ports","level":"1.8.2","depth":2,"next":{"title":"Custom Elements","level":"1.8.3","depth":2,"path":"interop/custom_elements.md","ref":"interop/custom_elements.md","articles":[]},"previous":{"title":"Flags","level":"1.8.1","depth":2,"path":"interop/flags.md","ref":"interop/flags.md","articles":[]},"dir":"ltr"},"config":{"plugins":["youtube","elm-repl","bulk-redirect","-sharing"],"root":"book","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"bulk-redirect":{"basepath":"/","redirectsFile":"redirects.json"},"youtube":{},"elm-repl":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"Evan Czaplicki","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Introducción a Elm","gitbook":"*","description":"Aprende Elm. Construye aplicaciones. Aprende programación funcional."},"file":{"path":"interop/ports.md","mtime":"2024-09-20T14:51:57.660Z","type":"markdown"},"gitbook":{"version":"5.1.4","time":"2024-09-20T14:52:25.057Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-elm-repl/repl.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

